name: Collections_new
on: push
jobs:
  GithubAction_details:
    runs-on: windows-latest
    steps:
      - run: |
          echo "author:" '${{ toJSON(github.repository_owner) }}'
          echo "workflow-path:" '${{ toJSON(github.ref) }}'
          echo "branch name:" '${{ toJSON(github.ref_name	) }}'
          echo "build-no:" '${{ toJSON(github.run_number) }}'
          echo "repo name:" '${{ toJSON(github.repository) }}'
  Using_Secrets:
    runs-on: windows-latest
    steps:
      - name: Secrets using env vars
        env:
          PASSWORD_PS: ${{secrets.PASSWORD}}
        run: echo $PASSWORD
  Details_Config:
    runs-on: windows-latest
    steps:
      - name: code checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 2
      - name: List the downloaded files
        run: dir
      - name: Displaying the contents of .config file
        run: |
          $myJson = Get-Content ".github/devops.config" -Raw | ConvertFrom-Json 
          $myName = $myJson.name
          $myEmpId = $myJson.employee_id
          $Myversion = $myJson.version
          if ([string]::IsNullOrEmpty($myEmpId))
          {throw "Values can't be null"}
      - name: reusing the variables between the steps
        run: echo $myName
          

